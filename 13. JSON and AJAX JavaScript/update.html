<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update</title>
</head>
<body>
    <div class="text-viewer--container--18Ayx"><div class="text-viewer--content--3hoqQ"><div class="a1 mb-space-md"> <h4>Updated</h4></div><div class="p-space-md"><div data-purpose="safely-set-inner-html:rich-text-viewer:html" class="article-asset--content--1dAQ9"><p>The following lessons discusses setting up an endpoint for posts from JavaScript.&nbsp; There is some PHP code provided for the endpoint as sometimes&nbsp; when posting POST to an endpoint you may encounter CORS errors which occur when cross origin requests are made.&nbsp; (Browser security feature to prevent script from posting)</p><p>Please note that PHP is only included so that you can see the code for the endpoint, if you want to post without using the PHP code you can send the post to http://discoveryvip.com/posttest.php which is an endpoint setup for this course to practice AJAX posts.&nbsp; </p><p><strong>PHP code does this</strong></p><div class="ud-component--base-components--code-block"><div><pre class="prettyprint linenums prettyprinted" role="presentation" style=""><ol class="linenums"><li class="L0"><span class="pun">&lt;?</span><span class="pln">php</span></li><li class="L1"><span class="pln">&nbsp;</span></li><li class="L2"><span class="pln">header</span><span class="pun">(</span><span class="str">"Access-Control-Allow-Origin: *"</span><span class="pun">);</span></li><li class="L3"><span class="pln">&nbsp;</span></li><li class="L4"><span class="pln">echo $_POST</span><span class="pun">[</span><span class="str">'name'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">.</span><span class="pln"> </span><span class="str">" "</span><span class="pln"> </span><span class="pun">.</span><span class="pln"> $_POST</span><span class="pun">[</span><span class="str">'age'</span><span class="pun">];</span></li><li class="L5"><span class="pln">&nbsp;</span></li><li class="L6"><span class="com">//echo $_GET['name'];</span></li><li class="L7"><span class="pln">&nbsp;</span></li><li class="L8"><span class="com">//echo date('l jS \of F Y h:i:s A');</span></li><li class="L9"><span class="pln">&nbsp;</span></li><li class="L0"><span class="pun">?&gt;</span></li></ol></pre></div></div><p>The header allows requests, which prevent the CORS errors that are common when making especially posts to external APIs.&nbsp; The echo is printing the content on screen so effectively taking any POST or GET request and outputting the posted content as a response.&nbsp; I added the php code to help those who wanted to practice with their own endpoint.</p><p><br></p><p><strong>More about CORS&nbsp;below</strong></p><p>Cross-Origin Resource Sharing (<a title="CORS: CORS (Cross-Origin Resource Sharing) is a system, consisting of transmitting HTTP headers, that determines whether browsers block frontend JavaScript code from accessing responses for cross-origin requests." target="_blank" rel="noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Glossary/CORS">CORS</a>) is a mechanism that uses additional <a title="HTTP: The HyperText Transfer Protocol (HTTP)&nbsp;is the underlying network protocol that enables transfer of hypermedia documents on the Web, typically between a browser and a server so that humans can read them. The current version of the HTTP specification is called HTTP/2." target="_blank" rel="noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Glossary/HTTP">HTTP</a> headers to tell a browser to let a web application running at one origin (domain) have permission to access selected resources from a server at a different origin. A web application executes a <strong>cross-origin HTTP request</strong> when it requests a resource that has a different origin (domain, protocol, and port) than its own origin.</p><p>An example of a cross-origin request: The frontend JavaScript code for a web application served from <code>http://domain-a.com</code> uses <a title="Use XMLHttpRequest (XHR) objects to interact with servers. You can retrieve data from a URL without having to do a full page refresh. This enables a Web page to update just part of a page without disrupting what the user is doing." target="_blank" rel="noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest"><code>XMLHttpRequest</code></a> to make a request for <code>http://api.domain-b.com/data.json</code>.</p><p>For security reasons, browsers restrict cross-origin HTTP requests initiated from within scripts. For example, <code>XMLHttpRequest</code> and the <a target="_blank" rel="noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch API</a> follow the <a target="_blank" rel="noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy">same-origin policy</a>. This means that a web application using those APIs can only request HTTP resources from the same origin the application was loaded from, unless the response from the other origin includes the right CORS headers.</p><p><img align="middle" src="https://mdn.mozillademos.org/files/14295/CORS_principle.png"></p><p>The CORS mechanism supports secure cross-origin requests and data transfers between browsers and web servers. Modern browsers use CORS in an API container such as <code>XMLHttpRequest</code> or <a target="_blank" rel="noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch</a> to help mitigate the risks of cross-origin HTTP requests.</p></div></div><div class="mt-space-sm"></div></div></div>
</body>
</html>